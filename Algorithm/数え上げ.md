# 数え上げ

```
与えられた文字列を並べ変えてできる全てのパターンを表示するアルゴリズム。
```



**例**

```
ABC
```

```
ABC
ACB
BAC
BCA
CAB
CBA
```



## サンプルプログラム

```js
function enumerate(str) 
{
    const len   = str.length; // 文字数
    const count = len**len;   // パターンの総数 3!
    
    for(let i = 0; i < count; ++i) {
    
        const array = [];    

        // n文字をn進数としてみて、組合せを網羅する
        for(let j = len - 1; 0 <= j; --j) {
            const d = Math.floor(i / (len**j)) % len;
            array.push(d);
        }
    
        // AAA, ABAなど同じ文字が含まれるケースを除外
        // 配列の中から重複を除き、元の配列の要素数と比較してるので無駄が多い。
        // 桁数の和が 0 + 1 + 2 ... + len - 1、または全桁が1の時を除外するという条件の方が軽そう。
		if (array.length !== Array.from(new Set(array)).length) continue;
        
        // 文字の組み合わせ配列を元に、文字列を復元
        let s = "";

        array.map((no) => {
            s += str[no];
        });
        
        console.log(s);
    }
}

enumerate("ABC");
```



## 解説

ABCを先頭から数値を振り、012として、文字の重複を含めて文字を並べてみると以下のようになる。

| 文字 | 3進数 | 10進数 |
| ---- | ----- | ------ |
| AAA  | 000   | 0      |
| AAB  | 001   | 1      |
| AAC  | 002   | 2      |
| ABA  | 010   | 3      |
| ABB  | 011   | 4      |
| ABC  | 012   | 5      |
| ACA  | 020   | 6      |
| ACB  | 021   | 7      |
| ACC  | 022   | 8      |
| ...  | ...   | ...    |

3文字を重複を含めて並べる場合の数は$3! = 27$通り



0から26までループし、ループ数を3進数として考えると

3文字目 = 3進数の1桁目 = $3^0$で割って、3の余りを取る。

2文字目 = 3進数の2桁目 = $3^1$で割って、3の余りを取る。

1文字目 = 3進数の3桁目 = $3^2$で割って、3の余りを取る。



これで、n桁目にどの文字を表示するかの組み合わせが全て取得できる。