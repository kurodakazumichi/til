# Colors

Node.js製のパッケージ、コンソールの文字にスタイルを提供する。



## 主な収穫

- ANSI スケープコードの知識



## ANSI スケープコードとは

> ANSIエスケープシーケンスは、ビデオテキストターミナルやターミナルエミュレータで、カーソルの位置、色、フォントスタイル、その他のオプションを制御するための帯域内信号の規格である。この規格では、ASCIIエスケープ文字とブラケット文字で始まる特定のバイト列がテキストに埋め込まれている。端末はこれらのシーケンスを、そのまま表示するテキストではなく、コマンドとして解釈する。
>
> 引用：wikiより



要約すると特定の書き方をした文字列は、コンソールに表示する文字の色を赤にしたり太字にしたりといった制御コードとして扱うことができるというお話。

厳密な規格というわけではなさそうだが、多くのコンソールではANSIスケープコードにある程度対応している模様。



### jsのコンソールで文字の色を変えるには

制御文字のフォーマット

```
\u001b[{param};{param}...m
```

- `\u001b`は制御文字である
- `[`の後ろにパラメータを`;`区切りで指定する
- 制御コードの終了として最後に`m`がくる



例：以下のコードは黄色の太字で`yellow`と表示される。

```js
console.log('\u001b[33;1myellow');
```

- `33`は文字を黄色にするパラメータ
- `1`は太字にするパラメータ



## ソースコードの解析概要

### lib/system/has-flag.js

環境変数やコマンドライン引数の中で、特定のフラグが指定されているかをチェックする関数が定義されているのみ



### lib/system/supports-colors.js

実行環境(Node.jsのバージョンやOS、ターミナルの種類など)からサポート可能なカラーレベルを判定、取得する。





## マニアックなこと

### OSのリリース情報を得る(Win)

```js
if (process.platform === 'win32') {
  var osRelease = os.release();
  console.log(osRelease);
}
```

**output**

```
'10.0.19042'
```

Win10、ビルドバージョン`19042.1052`環境で実行した結果。



### Node.jsのバージョンを知る

```
console.log(process.versions.node);
```

**output**

```
'12.18.2'
```



