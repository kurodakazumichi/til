## 順列

> 順列とはいくつかのものを並べたものの１つ１つを順列という。

例えば 1, 2, 3という3つの数字を並べた場合、以下の6通りがある。
$$
1, 2, 3 \\
1, 3, 2 \\
2, 1, 3 \\
2, 3, 1 \\
3, 1, 2 \\
3, 2, 1
$$
この１つ１つの事を順列と呼ぶ。



### 順列の総数

異なるn個の中から、r個取り出して並べたもの(順列)の総数を以下の記号を使って表す。
$$
_n P _r
$$
順列は英語で`permutation`というので、`P`を使って表す。



例) 1, 2, 3, 4 という4つの数字の中から、3つを選んで並べた順列の総数であれば、以下のように表す。
$$
_4 P _3
$$

## 計算方法

Pの計算は以下のようになる。
$$
_n P _r = n(n-1)(n-2) ... (n - r + 1)
$$



例) 4つのモノから3つを選んで並べる場合、以下のように表し、答えは24通りである。
$$
_4 P _3 = 4 \cdot 3 \cdot 2 = 24
$$


また、n個の中から0個を選ぶというのは「1個も並べない」という1つのパターンとして捉え

以下のように定義される。
$$
_n P _0 = 1
$$


### 順列の総数記号をプログラム

```js
// 順列の総数を求めるPという関数(順列=permutation)
function P(n, r) {
  // 0 <= r < n という関係を満たしていなければ例外として-1を返す事にしよう
  if (n < r || n <= 0 || r < 0) return -1

  // r が 0の時は1を返すので初期値を1とする
  a = 1;

  for(let i = n, m = n - r; m < i; --i) {
    a *= i;
  }
  return a;
}


console.log(P(4, 3)); // 24
console.log(P(5, 2)); // 20
console.log(P(3, 3)); // 6
```





## 階乗

階乗は「ビックリマーク」を使って以下のように書く
$$
5!
$$
階乗は以下のように計算する
$$
5! = 5 \times 4 \times 3 \times 2 \times 1
$$
一般には以下のように表す
$$
n! = n(n - 1)(n - 2) ... \times 2 \times 1
$$

### 順列の総数と階乗の関係

$$
_4 P _4 = 4 \times 3 \times 2 \times 1 \\
これは 4の階乗と同じなので以下のように表せる \\
_4 P _4 = 4!
$$

なので以下の関係が成り立つ。
$$
_n P _n = n!
$$





順列の記号Pを階乗を用いて表す場合は以下の公式がなりたつ。
$$
0 < r < n の時 \\
_n P _r = \frac{n!}{(n - r)!}
$$
また 0の階乗は1と定められている
$$
0! = 1
$$

### 階乗記号をプログラム



```js
// 階乗を求めるFという関数(階乗=Factorial)
function F(n) {
  // nにマイナスが指定された場合は例外として-1を返すとしよう
  if (n < 0) return -1;
  
  // 0! は 1と決まっているので初期値を1とする
  a = 1;
  for(let i = n; 0 < i; --i) {
    a *= i;
  }
  return a;
}

console.log(F(0)); // 1
console.log(F(1)); // 1
console.log(F(2)); // 2
console.log(F(3)); // 6
console.log(F(4)); // 4
```



## 様々な順列

### 円順列

n個のモノを円状に並べたものを円順列と言い、円順列の総数は以下で求められる。
$$
n個のモノを並べた円順列の総数は \\
(n - 1)!
$$

### 重複順列

n種類ものからr個を取ってきて並べたものを重複順列と言い、重複順列の総数は以下で求められる。
$$
n種類のモノからr個取ってきて並べた順列の総数は \\
n^r
$$

### 同じものを含む順列

一般に、n個のもののうちp個が同じもの、残りのうちq個が同じモノ,...のとき、これらを全て1列に並べる順列の総数は
$$
\frac{n!}{p!q!...} (ただし、p + q + ... = n)
$$


例) a, a, a, b, b, c の6個の文字全てを1列に並べる順列の総数であれば

① 6個のモノのうち、3個が同じモノ、残りのうち2個が同じモノと考えられるので、以下で求められる
$$
\frac{6!}{3!2!} = \frac{6 \cdot 5 \cdot 4 \cdot 3 \cdot 2 \cdot 1}{ 3 \cdot 2 \cdot 2}
= 6 \cdot 5 \cdot 2 = 60
$$


### 

