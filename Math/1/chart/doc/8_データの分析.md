# データの分析

## データの基本

### 変量

気温、降水量、身長、体重などの何らかの特性を表す数量を変量と呼ぶ。

### データ

数学では、ある変量の測定値や観測値の集まりをデータと呼ぶ。

### 分布

データの散らばり(数値のばらけ具合)を分布と呼ぶ。



## 代表値

データの分析し、データの特徴を表すような数値を**代表値**と呼び、よく登場する代表値として以下のようなものがある。

またデータの個数を、そのデータの**大きさ**と呼ぶ。



### 平均値

データの総和をデータの大きさで割った数のこと



### 最頻値

データの中でもっとも多く登場する数値のことで、**モード**とも呼ばれる。

全ての値が1度しか登場しない場合、そのデータにおける最頻値はなく、同じ数だけ登場する値がある場合はどちらも最頻値となる。そのため最頻値は複数になることもある。



### 中央値

データの値を大きさで並べた状態で中央にくる値のこと。

データの大きさが奇数の場合は中央が１つに定まるが、偶数の場合は**中央の２つの値の平均**をとって中央値とする。



## 度数分布表

度数分布表はある範囲(**階級**)に該当するデータがいくつあるか(**度数**)を表す表である。

| 階級        | 度数 |
| ----------- | ---- |
| 4以上~7未満 | 4    |
| 7~10        | 6    |
| 10~13       | 3    |
| 13~16       | 2    |
| 計          | 15   |



7~10のような区間を幅を**階級の幅**とよび、階級の中央の値を**階級値**とよぶ。

たとえば7~10の階級の階級値は、$(7+10) \div 2 = 8.5$となる。



### 平均値

度数分布表における平均値は各階級の**階級値×度数**の総和をデータの大きさで割った値になる。



### 最頻値

度数分布表における最頻値は、最も度数が高い階級の**階級値**を最頻値とする。度数が同じ階級がある場合は最頻値も複数になる。



### 中央値

度数分布表における中央値は、データの大きさから、中央にくる値を調べる。その値が所属する階級の階級値が中央値となる。

例えばデータの大きさが15の場合、中央にくるのは8番目のデータになり、8番目のデータがあるのは`7~10`の階級なので、中央値は`8.5`

データの大きさが偶数の場合、中央にくるデータは2つあるので、2つのデータが所属する階級の階級値の平均をとる。



> 中央値の解説はいまいち断言している情報がえられなかったので若干怪しい、総合的に考えるとおそらくあっているはず。



## 分散と標準偏差

### 偏差

データの平均値と各データがどれだけ差があるかを表す値として、**平均値との差**を考えることがある。

変量$x$と平均値の差を**偏差**といい、以下のように表す。
$$
x - \bar{x}
$$

### 偏差の総和

$x_1, x_2,...x_n$のデータがあった場合、偏差の総和は以下のように、0になる。
$$
\begin{align}
(x_1 - \bar{x}) + (x_2 - \bar{x}) +...+(x_n - \bar{x}) &= (x_1 + x_2 + ... x_n) - n\bar{x} \\
&= n \bar{x} - n\bar{x} \\
&= 0 \\

\\ 

(x_1 + x_2 + ... x_n) &=n\bar{x}になるのは、以下を参照 \\
\bar{x} &= \frac{1}{n}(x_1 + x_2 + ... x_n) \\
n\bar{x} &= (x_1 + x_2 + ... x_n)
\end{align}
$$
このように、偏差の総和は0になってしまうため、偏差をつかってデータのばらつきを見る事はできない。



### 分散

偏差ではデータのばらつきを表すことができないため、偏差の二乗の平均値を利用してデータのばらつきを見る事があり、この**偏差の二乗の平均**を**分散**とよび$s^2$で表す。

偏差の二乗は必ず正の値になり総和は0にならない、また平均から離れるほど値が大きくなるため、バラつきをみる指標となる。
$$
s^2 = \frac{1}{n}\{(x_1 - \bar{x})^2 + (x_2 - \bar{x})^2 + ... (x_n - \bar{x})^2\}
$$


### 標準偏差

分散の正の平方根を標準偏差と呼び、$s$で表す。
$$
s = \sqrt{s^2}
$$
一般的に標準偏差が大きいほど、データの散らばりの度合いが大きく、小さい程データの各値は平均値の近くに集まっている傾向がある。



### 分散と平均値の関係式

$$
\begin{align}
s^2 &= \frac{1}{n}\{(x_1 - \bar{x}) + (x_2 - \bar{x}) + ... + (x_n3 - \bar{x})\} \\
&= \frac{1}{n}(x_1^2 - 2x_1\bar{x} + \bar{x}^2 - x_2^2 + 2x_2\bar{x} + \bar{x}^2+...x_n^2 - 2x_n\bar{x} + \bar{x}^2) \\
&= \frac{1}{n}\{(x_1^2 + x_2^2 + ... + x_n^2) -2\bar{x}(x_1+x_2+...+x_n) + n(\bar{x})^2 \} \\
&= \frac{1}{n}(x_1^2 + x_2^2 + ... + x_n^2) - -2\bar{x}\cdot\frac{1}{n}(x_1+x_2+...+x_n) + (\bar{x})^2 \} \\
&= \bar{x^2} - 2\bar{x}\cdot \bar{x} + (\bar{x})2 \\
&= \bar{x^2} - (\bar{x})^2
\end{align}
$$

分散の式を整理していくと最終的に以下の計算でも求められる。
$$
分散 = s^2 = (x^2の平均値) - (xの平均値)^2
$$


## 散布図

身長と体重のデータを用意し、身長をx、体重をyとしてグラフに点を打っていくとデータの散らばり具合を可視化でき、このようなものを**散布図**と呼ぶ。



### 正の相関、負の相関

点を打った結果、点が右上がりになっていることを**正の相関**、右下がりになっていることを**負の相関**という。xが増えるほどyが増える場合は正の相関、xが増えるほどyが減る場合は負の相関となる。全体的にばらけている場合は**相関がない**、**相関関係がない**という。



### 偏差の積と符号

xとyの平均値を中心と考えた場合、xの偏差が負であれば中心より左、正であれば中心より右にあると言える。

また同様に、yの偏差が負であれば下、正であれば上側にあるといえる。



正の相関がある場合、第1象限、第3象限にデータが集まることになり、これはxとyの偏差の積が正の値となる場合である。

負の相関がある場合、第2象限、第4象限にデータが集まることになり、これはxとyの偏差の積が負の値となる場合である。


$$
\begin{align}
(x_n - \bar{x})(y_n - \bar{y}) &> 0 であれば、第1,3象限 \\
(x_n - \bar{x})(y_n - \bar{y}) &< 0 であれば、第2,4象限
\end{align}
$$


### 共分散

xの偏差とyの偏差の積の総和をデータの大きさで割ったもので、$s_{xy}$で表す。
$$
s_{xy} = \frac{1}{n}\{
  (x_1 - \bar{x})(y_1 - \bar{y}) + 
  (x_2 - \bar{x})(y_2 - \bar{y}) + 
  ... + 
  (x_n - \bar{x})(y_n - \bar{y})
\}
$$


この値は正の相関があるときは正になり、負の相関がある場合は負になる。

データが中心に集まっていたり、均等に分布(相関がない場合)、偏差の積が打ち消し合って0に近い値になる。



## 相関係数

相関の強弱をみるための値で、$-1 \le r \le 1$の値をとり、$r$で表し以下の計算で求める。


$$
r = \frac{xとyの共分散}{(xの標準偏差) \times (yの標準偏差)}
$$


式を整理すると以下のように変形することも可能
$$
\begin{align}
r &= \frac{xとyの共分散}{(xの標準偏差) \times (yの標準偏差)} \\
&= \frac{
	\frac{1}{n} 
	\{
		(x_1 - \bar{x})(y_1 - \bar{y}) +
		(x_2 - \bar{x})(y_2 - \bar{y}) +
		... +
		(x_n - \bar{x})(y_n - \bar{y})
	\}
}
{
    \sqrt{\frac{1}{n}\{
        (x_1 - \bar{x})^2 +
        (x_2 - \bar{x})^2 +
        ... +
        (x_n - \bar{x})^2 
    \}}
    \sqrt{\frac{1}{n}\{
        (y_1 - \bar{x})^2 +
        (y_2 - \bar{x})^2 +
        ... +
        (y_n - \bar{x})^2 
    \}}
} \\
&= \frac{
	\{
		(x_1 - \bar{x})(y_1 - \bar{y}) +
		(x_2 - \bar{x})(y_2 - \bar{y}) +
		... +
		(x_n - \bar{x})(y_n - \bar{y})
	\}
}
{
    \sqrt{\{
        (x_1 - \bar{x})^2 +
        (x_2 - \bar{x})^2 +
        ... +
        (x_n - \bar{x})^2 
    \}}
    \sqrt{\{
        (y_1 - \bar{x})^2 +
        (y_2 - \bar{x})^2 +
        ... +
        (y_n - \bar{x})^2 
    \}}
} \\
&= \frac{(x - \bar{x})(y - \bar{y})の総和}{(x-\bar{x})^2の総和 \times (y-\bar{y})^2の総和}
\end{align}
$$
